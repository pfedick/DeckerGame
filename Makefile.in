VERSION ?= 0.10.1
PREVIOUS_TAG = 0.10.0
BUILD_NUMBER := $(shell git rev-list --all --count)
BUILDDATE := $(shell date '+%Y%m%d')

CXX			= @CXX@
EXTRA_CFLAGS = -ggdb -Wall
INCLUDE	= -Iinclude -Ipplib/include -I/mingw64/include/SDL2
CPPFLAGS	= @CPPFLAGS@
CXXFLAGS	= @CXXFLAGS@
CFLAGS		=  $(INCLUDE) $(EXTRA_CFLAGS) @CXXFLAGS@ @CFLAGS@ @DEFS@  @PTHREAD_CFLAGS@ 	@ZLIB_CFLAGS@ @BZ2_CFLAGS@ @PCRE_CFLAGS@ @ICONV_CFLAGS@ \
	@MPG123_CFLAGS@	@SDL2_CFLAGS@ -I/usr/include/ffmpeg
LDFLAGS		= @LDFLAGS@
LIBS_PPL7 = pplib/release/libppl7-tk.a  pplib/release/libppl7-audio.a  pplib/release/libppl7-gfx.a  pplib/release/libppl7-core.a
LIBAV = -lavcodec -lavformat -lswresample -lswscale -lavutil
LIBS		= $(LIBS_PPL7)  \
	@LIBS@ $(LIBAV) @PTHREAD_CFLAGS@ @PTHREAD_LIBS@ @ZLIB_LIBS@ @BZ2_LIBS@ @PCRE_LIBS@ \
	@PNG_LIBS@ @JPEG_LIBS@ @ICONV_LIBS@ @MPG123_LIBS@ @SDL2_LIBS@ \
	-lstdc++

TEXMAKER_LIBS		= pplib/release/libppl7-gfx.a  pplib/release/libppl7-core.a  \
	@LIBS@ @PTHREAD_CFLAGS@ @PTHREAD_LIBS@ @ZLIB_LIBS@ @BZ2_LIBS@ @PCRE_LIBS@ \
	@PNG_LIBS@ @JPEG_LIBS@ @ICONV_LIBS@ -lstdc++
TEXMAKER_CFLAGS		=  $(INCLUDE) $(EXTRA_CFLAGS) @CXXFLAGS@ @CFLAGS@ @DEFS@  @PTHREAD_CFLAGS@ 	@ZLIB_CFLAGS@ @BZ2_CFLAGS@ @PCRE_CFLAGS@ @ICONV_CFLAGS@



PROGRAM	= decker

OBJECTS=compile/main.o \
	compile/sdl.o \
	compile/game.o \
	compile/soundtrack.o \
	compile/background.o \
	compile/spritetexture.o \
	compile/level.o \
	compile/fps.o \
	compile/config.o \
	compile/translate.o \
	compile/color.o \
	compile/metrics.o \
	compile/ui_statusbar.o \
	compile/ui_menue.o \
	compile/ui_metrics.o \
	compile/ui_tileselection.o \
	compile/ui_spriteselection.o \
	compile/ui_tiletypeselection.o \
	compile/ui_tilesframe.o \
	compile/ui_worldwidget.o \
	compile/ui_objectselection.o \
	compile/ui_waynetedit.o \
	compile/ui_leveldialog.o \
	compile/widgets_groupbox.o \
	compile/widgets_dialog.o \
	compile/widgets_filedialog.o \
	compile/widgets_colorwidget.o \
	compile/widgets_tabwidget.o \
	compile/widgets_gradientwidget.o \
	compile/plane.o \
	compile/tiletype.o \
	compile/tile.o \
	compile/spritesystem.o \
	compile/particlesystem.o \
	compile/particle.o \
	compile/brickoccupation.o \
	compile/player.o \
	compile/physic.o \
	compile/animation.o \
	compile/resources.o \
	compile/waynet.o \
	compile/objectsystem.o \
	compile/object.o \
	compile/object_gem.o \
	compile/object_coin.o \
	compile/object_apple.o \
	compile/object_cherry.o \
	compile/object_trap.o \
	compile/object_threespeers.o \
	compile/object_laserbarrier.o \
	compile/object_enemy.o \
	compile/object_rat.o \
	compile/object_bat.o \
	compile/object_bird.o \
	compile/object_scorpion.o \
	compile/object_hangingspider.o \
	compile/object_savepoint.o \
	compile/object_medikit.o \
	compile/object_key.o \
	compile/object_arrow.o \
	compile/object_door.o \
	compile/object_floater.o \
	compile/object_playerstartpoint.o \
	compile/object_breakingground.o \
	compile/object_skeleton.o \
	compile/object_mummy.o \
	compile/object_fire.o \
	compile/object_windemitter.o \
	compile/object_rainemitter.o \
	compile/object_particleemitter.o \
	compile/object_vent.o \
	compile/object_speaker.o \
	compile/object_touchemitter.o \
	compile/object_mushroom.o \
	compile/object_treasurechest.o \
	compile/object_warpgate.o \
	compile/object_scarabeus.o \
	compile/object_switch.o \
	compile/object_stamper.o \
	compile/object_ai_figure.o \
	compile/object_wallenstein.o \
	compile/object_helena.o \
	compile/object_yeti.o \
	compile/object_autogeorge.o \
	compile/object_extralife.o \
	compile/object_levelend.o \
	compile/object_ostrich.o \
	compile/object_oxygen.o \
	compile/object_fish.o \
	compile/object_piranha.o \
	compile/object_breakingwall.o \
	compile/object_hammer.o \
	compile/object_cheese.o \
	compile/audio_audiosystem.o \
	compile/audio_audiostream.o \
	compile/audio_audiosample.o \
	compile/audio_audioinstance.o \
	compile/audio_audiopool.o \
	compile/start_screen.o \
	compile/settings_screen.o \
	compile/level_screen.o \
	compile/ingame_menue_screen.o \
	compile/gamestats_screen.o

#	compile/video_videoplayer.o \
#	compile/intro_screen.o \


TEXMAKER_OBJECTS	= compile/texm_main.o \
	compile/texm_texture.o compile/texm_texturefile.o compile/texm_cache.o

$(PROGRAM): update_version ppl7 $(OBJECTS)
	$(CXX) -o $(PROGRAM) $(OBJECTS) $(LIBS)
	-chmod 755 $(PROGRAM)

all: update_version $(PROGRAM) texmaker

mingw: update_version
	rm -rf release/deploy
	mkdir -p release/deploy
	make -j 16 ppl7
	make -j 16 $(PROGRAM)
	ldd decker.exe  | grep -v WINDOWS | grep ucrt64 | awk '{print $$3}' | while read line  ; do cp $${line} release/deploy; done

	cat setup.tpl.iss | sed "s/^AppVersion=.*/AppVersion=${VERSION}.${BUILD_NUMBER}/"  \
		| sed "s/^AppVerName=.*/AppVerName=GeorgeDecker ${VERSION}/"  \
		| sed "s/^VersionInfoVersion=.*/VersionInfoVersion=${VERSION}/"  \
		| sed "s/^OutputBaseFilename=.*/OutputBaseFilename=GeorgeDecker-${VERSION}-Setup/"  \
		> setup.iss
	cp decker.exe release/deploy
	strip release/deploy/decker.exe

setup: mingw
	"C:\Program Files (x86)\Inno Setup 5\ISCC.exe" setup.iss


history:
	@echo "Git history between Tag $(PREVIOUS_TAG) and head" >  history.tmp
	@echo "================================================================================" >>  history.tmp
	@git log --pretty=format:"%ad=!=%s" --date=iso8601-strict $(PREVIOUS_TAG)...main | sort | awk -F "=!=" '{ print $$2}' >> history.tmp
	cat history.tmp

ppl7:
	-mkdir -p pplib/release
	cd pplib && $(MAKE) -j release/libppl7-core.a
	cd pplib && $(MAKE) -j release/libppl7-gfx.a
	cd pplib && $(MAKE) -j release/libppl7-tk.a
	cd pplib && $(MAKE) -j release/libppl7-audio.a

texmaker: $(TEXMAKER_OBJECTS) ppl7
	$(CXX) -o texmaker $(TEXMAKER_OBJECTS) $(TEXMAKER_LIBS)
	-chmod 755 texmaker

fixbricks: compile/fixbricks_main.o
	$(CXX) -o fixbricks compile/fixbricks_main.o $(TEXMAKER_LIBS)
	-chmod 755 fixbricks
	./fixbricks

mergeintro: compile/mergeintro_main.o
	$(CXX) -o mergeintro compile/mergeintro_main.o $(TEXMAKER_LIBS)
	-chmod 755 mergeintro


clean:
	-rm -f compile/*.o $(PROGRAM) *.core

cleanall:
	-rm -f compile/*.o $(PROGRAM) texmaker mergeintro fixbricks *.core
	cd pplib && $(MAKE) clean


sprites_white:
	./texmaker -s lightwave/Render/sprites_white_x8/ -t res/sprites_white_x8.tex -w 2048 -h 2048 --pivot_detection lower_middle -x tmp/sprites_white
	./texmaker -s lightwave/Render/sprites_white_ui/ -t res/sprites_white_ui.tex -w 512 -h 512 -px 0 -py 0

sprites_nature:
	./texmaker -s lightwave/Render/sprites_nature/ -t res/sprites_nature.tex -w 2048 -h 2048 --pivot_detection lower_middle -x tmp/sprites_nature
	./texmaker -s lightwave/Render/sprites_nature_ui/ -t res/sprites_nature_ui.tex -w 512 -h 512 -px 0 -py 0

sprites_tropical:
	./texmaker -s lightwave/Render/sprites_tropical/ -t res/sprites_tropical.tex -w 2048 -h 2048 --pivot_detection lower_middle -x tmp/sprites_tropical
	./texmaker -s lightwave/Render/sprites_tropical_ui/ -t res/sprites_tropical_ui.tex -w 512 -h 512 -px 0 -py 0

sprites_objects:
	./texmaker -s lightwave/Render/sprites_objects/ -t res/sprites_objects.tex -w 2048 -h 2048 --pivot_detection lower_middle -x tmp/sprites_objects
	./texmaker -s lightwave/Render/sprites_objects_ui/ -t res/sprites_objects_ui.tex -w 512 -h 512 -px 0 -py 0

bricks_white:
	./texmaker -s lightwave/Render/bricks_white_ui/ -t res/bricks_white_ui.tex -w 1024 -h 1024 -px 0 -py 0
	./texmaker -s lightwave/Render/bricks_white/ -t res/bricks_white.tex -w 1024 -h 1024 -px 0 -py 160 -x tmp/bricks_white

enemy_piranha:
	./texmaker -s lightwave/Render/enemies/piranha/ -t res/piranha.tex -w 512 -h 512 -px 60 -py 100 -x tmp/enemy_piranha -x tmp/piranha

enemy_ostrich:
	./texmaker -s lightwave/Render/enemies/ostrich/ -t res/ostrich.tex -w 2048 -h 1536 -px 128 -py 256 -x tmp/enemy_ostrich -x tmp/ostrich

enemy_rat:
	./texmaker -s lightwave/Render/enemies/rat/ -t res/rat.tex -w 1024 -h 768 -px 128 -py 114 -x tmp/rat -x tmp/rat


enemy_scorpion:
	./texmaker -s lightwave/Render/enemies/scorpion/ -t res/scorpion.tex -w 1024 -h 1024 -px 128 -py 125 -x tmp/scorpion
	./texmaker -s lightwave/Render/enemies/scorpion_metalic/ -t res/scorpion_metalic.tex -w 1024 -h 1024 -px 140 -py 154 -x tmp/scorpion_metalic

trap_three_speers:
	./texmaker -s lightwave/Render/enemies/3speers/ -t res/enemy_3speers.tex -w 1024 -h 1024 -px 256 -py 255  -x tmp/enemy_3speers

objects_ui:
	./texmaker -s lightwave/Render/objects/ui/ -t res/objects_ui.tex -w 1024 -h 1024 -px 0 -py 0 -x tmp/obects_ui

interactive_objects:
	./texmaker -s lightwave/Render/objects/interactive/ -t res/objects.tex -w 1024 -h 1024 -px 128 -py 250  -x tmp/objects

doors:
	./texmaker -s lightwave/Render/objects/door_v2/ -t res/doors.tex -w 2048 -h 2048 -px 144 -py 242 -x tmp/doors

george:
	./texmaker -s lightwave/Render/george_adventure/ -t res/george_adventure.tex -w 2048 -h 2048 -px 128 -py 195 -x tmp/george_adventure
	./texmaker -s lightwave/Render/george/ -t res/george.tex -w 1024 -h 1024 -px 128 -py 195  -x tmp/george


breakingwall:
	./texmaker -s lightwave/Render/enemies/breakingwall/ -t res/breakingwall.tex -w 2048 -h 2048 -px 384 -py 254 -x tmp/breakingwall

enemies: enemy_ostrich enemy_scorpion enemy_piranha trap_three_speers breakingwall

sprites: george sprites_white sprites_nature sprites_tropical sprites_objects bricks_white interactive_objects objects_ui doors enemies
	./texmaker -s res/tiletypes/ -t res/tiletypes.tex -w 256 -h 256 -px 0 -py 0 -x tmp/tiletypes
	./texmaker -f res/cursor/cursor.lst -t res/cursor.tex -w 128 -h 128 -px 0 -py 0 -x tmp/cursor
	./texmaker -s lightwave/Render/sprites_plants/ -t res/sprites_plants.tex -w 1024 -h 1024 --pivot_detection lower_middle
	./texmaker -s lightwave/Render/sprites_plants_ui/ -t res/sprites_plants_ui.tex -w 512 -h 512 -px 0 -py 0
	./texmaker -s lightwave/Render/sprites_nature_blury/ -t res/sprites_nature_blury.tex -w 2048 -h 2048 --pivot_detection lower_middle
	./texmaker -s lightwave/Render/sprites_nature_blury_ui/ -t res/sprites_nature_blury_ui.tex -w 512 -h 512 -px 0 -py 0
	./texmaker -s lightwave/Render/sprites_rocks/ -t res/sprites_rocks.tex -w 1024 -h 1024 --pivot_detection lower_middle
	./texmaker -s lightwave/Render/sprites_rocks_ui/ -t res/sprites_rocks_ui.tex -w 256 -h 256 -px 0 -py 0

	./texmaker -s lightwave/Render/sprites_flowers/ -t res/sprites_flowers.tex -w 512 -h 512 -px 32 -py 32
	./texmaker -s lightwave/Render/sprites_flowers/ -t res/sprites_flowers_ui.tex -w 512 -h 512 -px 0 -py 0
	./texmaker -s lightwave/Render/objects/treasure/ -t res/sprites_treasure.tex -w 512 -h 512 -px 64 -py 110
	./texmaker -s lightwave/Render/objects/treasure_ui/ -t res/sprites_treasure_ui.tex -w 128 -h 128 -px 0 -py 0

	./texmaker -s res/solidcolor/ -t res/bricks_solid.tex -w 512 -h 512 -px 0 -py 76
	./texmaker -s res/solidcolor/ -t res/bricks_solid_ui.tex -w 512 -h 512 -px 0 -py 0
	./texmaker -s lightwave/Render/bricks_white_ui/ -t res/bricks_white_ui.tex -w 512 -h 512 -px 0 -py 0
	./texmaker -s lightwave/Render/bricks_white/ -t res/bricks_white.tex -w 1024 -h 1024 -px 0 -py 160
	./texmaker -s lightwave/Render/particles/ -t res/particles.tex -w 512 -h 512 -px 128 -py 128
	./texmaker -s lightwave/Render/mummy/ -t res/mummy.tex -w 1024 -h 1024 -px 128 -py 195
	./texmaker -s lightwave/Render/skeleton/ -t res/skeleton.tex -w 1024 -h 1024 -px 128 -py 195
	./texmaker -s lightwave/Render/objects/vent/ -t res/vent.tex -w 1024 -h 1024 --pivot_detection lower_middle
	./texmaker -s lightwave/Render/enemies/mushroom/ -t res/mushroom.tex -w 1024 -h 1024 -px 52 -py 77
	./texmaker -s lightwave/Render/enemies/scarabeus/ -t res/scarabeus.tex -w 256 -h 256 -px 32 -py 55
	./texmaker -s lightwave/Render/enemies/wallenstein/ -t res/wallenstein.tex -w 1024 -h 1024 -px 128 -py 195
	./texmaker -s lightwave/Render/enemies/helena/ -t res/helena.tex -w 1024 -h 1024 -px 128 -py 195
	./texmaker -s lightwave/Render/enemies/yeti/ -t res/yeti.tex -w 2048 -h 2048 -px 128 -py 195
	./texmaker -s lightwave/Render/enemies/bat/ -t res/bat.tex -w 256 -h 256 -px 64 -py 120
	./texmaker -s lightwave/Render/enemies/bird/ -t res/bird.tex -w 512 -h 512 -px 64 -py 120
	./texmaker -s lightwave/Render/enemies/stamper_vertical/ -t res/stamper_vertical.tex -w 1024 -h 1024 -px 64 -py 271
	./texmaker -s lightwave/Render/objects/laser/ -t res/laser.tex -w 128 -h 128 -px 16 -py 16
	./texmaker -s lightwave/Render/objects/treasure_chest/ -t res/treasure_chest.tex -w 1024 -h 1024 -px 128 -py 242
	./texmaker -s lightwave/Render/objects/doors/ -t res/doors.tex -w 1024 -h 1024 -px 144 -py 242
	./texmaker -s lightwave/Render/objects/levelend/ -t res/levelend.tex -w 2048 -h 1024 -px 160 -py 280



fonts:
	- rm -rf res/*.fnt6
	pplfontmaker -t res/notosans-black.fnt6 -q /usr/share/fonts/google-noto/NotoSans-Black.ttf -s "12,14,16,18,20,30,40,50,64" --idn --aa4 -n "NotoSans-Black" --zlib -6
	pplfontmaker -t res/notosans.fnt6 -q /usr/share/fonts/google-noto/NotoSans-Regular.ttf -s "8,10,12,14,16,18,20,30" --idn --aa4 -n "NotoSans" --zlib -6
	pplfontmaker -t res/notosans.fnt6 -q /usr/share/fonts/google-noto/NotoSans-Bold.ttf -s "8,10,12,14,16,18,20,30" --idn --aa4 -n "NotoSans" --zlib -6 --isbold


update_version:
	@mkdir -p tmp
	@echo "#ifndef VERSION_H_" > tmp/version.h
	@echo "#define VERSION_H_" >> tmp/version.h
	@echo "#define DECKER_VERSION \"$(VERSION)\"" >> tmp/version.h
	@echo "#define DECKER_REVSION \"$(BUILD_NUMBER)\"" >> tmp/version.h
	@echo "#define DECKER_BUILDDATE $(BUILDDATE)" >> tmp/version.h
	@echo "#endif" >> tmp/version.h
	@diff tmp/version.h include/version.h > /dev/null 2>&1; if [ $$? -ne 0 ] ; then cp tmp/version.h include/version.h; fi


compile/main.o: src/main.cpp Makefile include/decker.h
	- @mkdir -p compile
	$(CXX) -o compile/main.o -c src/main.cpp $(CFLAGS)

compile/sdl.o: src/game/sdl.cpp Makefile include/decker.h
	- @mkdir -p compile
	$(CXX) -o compile/sdl.o -c src/game/sdl.cpp $(CFLAGS)

compile/metrics.o: src/game/metrics.cpp Makefile include/decker.h
	- @mkdir -p compile
	$(CXX) -o compile/metrics.o -c src/game/metrics.cpp $(CFLAGS)

compile/game.o: src/game/game.cpp Makefile include/decker.h include/ui.h include/objects.h include/audio.h \
	include/translate.h include/particle.h include/screens.h
	- @mkdir -p compile
	$(CXX) -o compile/game.o -c src/game/game.cpp $(CFLAGS)

compile/soundtrack.o: src/game/soundtrack.cpp Makefile include/decker.h
	- @mkdir -p compile
	$(CXX) -o compile/soundtrack.o -c src/game/soundtrack.cpp $(CFLAGS)

compile/background.o: src/game/background.cpp Makefile include/decker.h
	- @mkdir -p compile
	$(CXX) -o compile/background.o -c src/game/background.cpp $(CFLAGS)

compile/spritetexture.o: src/game/spritetexture.cpp Makefile include/decker.h
	- @mkdir -p compile
	$(CXX) -o compile/spritetexture.o -c src/game/spritetexture.cpp $(CFLAGS)

compile/resources.o: src/game/resources.cpp Makefile include/decker.h
	- @mkdir -p compile
	$(CXX) -o compile/resources.o -c src/game/resources.cpp $(CFLAGS)

compile/color.o: src/game/color.cpp Makefile include/decker.h
	- @mkdir -p compile
	$(CXX) -o compile/color.o -c src/game/color.cpp $(CFLAGS)

compile/level.o: src/game/level.cpp Makefile include/decker.h include/objects.h \
	include/waynet.h include/particle.h include/player.h
	- @mkdir -p compile
	$(CXX) -o compile/level.o -c src/game/level.cpp $(CFLAGS)

compile/fps.o: src/game/fps.cpp Makefile include/decker.h
	- @mkdir -p compile
	$(CXX) -o compile/fps.o -c src/game/fps.cpp $(CFLAGS)

compile/config.o: src/game/config.cpp Makefile include/decker.h
	- @mkdir -p compile
	$(CXX) -o compile/config.o -c src/game/config.cpp $(CFLAGS)

compile/translate.o: src/game/translate.cpp Makefile include/translate.h
	- @mkdir -p compile
	$(CXX) -o compile/translate.o -c src/game/translate.cpp $(CFLAGS)

compile/plane.o: src/game/plane.cpp Makefile include/decker.h
	- @mkdir -p compile
	$(CXX) -o compile/plane.o -c src/game/plane.cpp $(CFLAGS)

compile/tiletype.o: src/game/tiletype.cpp Makefile include/decker.h
	- @mkdir -p compile
	$(CXX) -o compile/tiletype.o -c src/game/tiletype.cpp $(CFLAGS)

compile/spritesystem.o: src/game/spritesystem.cpp Makefile include/decker.h
	- @mkdir -p compile
	$(CXX) -o compile/spritesystem.o -c src/game/spritesystem.cpp $(CFLAGS)

compile/particlesystem.o: src/game/particlesystem.cpp Makefile include/decker.h include/particle.h
	- @mkdir -p compile
	$(CXX) -o compile/particlesystem.o -c src/game/particlesystem.cpp $(CFLAGS)

compile/particle.o: src/game/particle.cpp Makefile include/particle.h
	- @mkdir -p compile
	$(CXX) -o compile/particle.o -c src/game/particle.cpp $(CFLAGS)

compile/objectsystem.o: src/game/objectsystem.cpp Makefile include/objects.h include/decker.h include/wallenstein.h include/player.h
	- @mkdir -p compile
	$(CXX) -o compile/objectsystem.o -c src/game/objectsystem.cpp $(CFLAGS)

compile/waynet.o: src/game/waynet.cpp Makefile include/waynet.h
	- @mkdir -p compile
	$(CXX) -o compile/waynet.o -c src/game/waynet.cpp $(CFLAGS)

compile/tile.o: src/game/tile.cpp Makefile include/decker.h
	- @mkdir -p compile
	$(CXX) -o compile/tile.o -c src/game/tile.cpp $(CFLAGS)

compile/player.o: src/game/player.cpp Makefile include/player.h include/animation.h include/decker.h include/objects.h include/physic.h
	- @mkdir -p compile
	$(CXX) -o compile/player.o -c src/game/player.cpp $(CFLAGS)

compile/physic.o: src/game/physic.cpp Makefile include/player.h include/decker.h include/physic.h
	- @mkdir -p compile
	$(CXX) -o compile/physic.o -c src/game/physic.cpp $(CFLAGS)

compile/animation.o: src/game/animation.cpp Makefile include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/animation.o -c src/game/animation.cpp $(CFLAGS)

compile/brickoccupation.o: src/game/brickoccupation.cpp Makefile include/decker.h
	- @mkdir -p compile
	$(CXX) -o compile/brickoccupation.o -c src/game/brickoccupation.cpp $(CFLAGS)


# Objects
compile/object.o: src/objects/object.cpp Makefile include/objects.h
	- @mkdir -p compile
	$(CXX) -o compile/object.o -c src/objects/object.cpp $(CFLAGS)

compile/object_gem.o: src/objects/gem.cpp Makefile include/objects.h include/animation.h include/player.h include/audiopool.h
	- @mkdir -p compile
	$(CXX) -o compile/object_gem.o -c src/objects/gem.cpp $(CFLAGS)

compile/object_coin.o: src/objects/coin.cpp Makefile include/objects.h include/animation.h include/player.h include/audiopool.h
	- @mkdir -p compile
	$(CXX) -o compile/object_coin.o -c src/objects/coin.cpp $(CFLAGS)

compile/object_apple.o: src/objects/apple.cpp Makefile include/objects.h include/animation.h include/player.h include/audiopool.h
	- @mkdir -p compile
	$(CXX) -o compile/object_apple.o -c src/objects/apple.cpp $(CFLAGS)

compile/object_cherry.o: src/objects/cherry.cpp Makefile include/objects.h include/animation.h include/player.h include/audiopool.h
	- @mkdir -p compile
	$(CXX) -o compile/object_cherry.o -c src/objects/cherry.cpp $(CFLAGS)

compile/object_trap.o: src/objects/trap.cpp Makefile include/objects.h
	- @mkdir -p compile
	$(CXX) -o compile/object_trap.o -c src/objects/trap.cpp $(CFLAGS)

compile/object_threespeers.o: src/objects/threespeers.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_threespeers.o -c src/objects/threespeers.cpp $(CFLAGS)

compile/object_laserbarrier.o: src/objects/laserbarrier.cpp Makefile include/objects.h
	- @mkdir -p compile
	$(CXX) -o compile/object_laserbarrier.o -c src/objects/laserbarrier.cpp $(CFLAGS)

compile/object_enemy.o: src/objects/enemy.cpp Makefile include/objects.h
	- @mkdir -p compile
	$(CXX) -o compile/object_enemy.o -c src/objects/enemy.cpp $(CFLAGS)

compile/object_rat.o: src/objects/rat.cpp Makefile include/objects.h
	- @mkdir -p compile
	$(CXX) -o compile/object_rat.o -c src/objects/rat.cpp $(CFLAGS)

compile/object_hangingspider.o: src/objects/hangingspider.cpp Makefile include/objects.h
	- @mkdir -p compile
	$(CXX) -o compile/object_hangingspider.o -c src/objects/hangingspider.cpp $(CFLAGS)

compile/object_key.o: src/objects/key.cpp Makefile include/objects.h include/player.h include/audiopool.h
	- @mkdir -p compile
	$(CXX) -o compile/object_key.o -c src/objects/key.cpp $(CFLAGS)

compile/object_door.o: src/objects/door.cpp Makefile include/objects.h include/animation.h include/player.h include/audiopool.h
	- @mkdir -p compile
	$(CXX) -o compile/object_door.o -c src/objects/door.cpp $(CFLAGS)

compile/object_floater.o: src/objects/floater.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_floater.o -c src/objects/floater.cpp $(CFLAGS)

compile/object_medikit.o: src/objects/medikit.cpp Makefile include/objects.h include/player.h include/audiopool.h
	- @mkdir -p compile
	$(CXX) -o compile/object_medikit.o -c src/objects/medikit.cpp $(CFLAGS)

compile/object_savepoint.o: src/objects/savepoint.cpp Makefile include/objects.h include/animation.h include/player.h include/audiopool.h
	- @mkdir -p compile
	$(CXX) -o compile/object_savepoint.o -c src/objects/savepoint.cpp $(CFLAGS)

compile/object_arrow.o: src/objects/arrow.cpp Makefile include/objects.h include/animation.h \
	include/player.h include/audiopool.h include/widgets.h include/decker.h
	- @mkdir -p compile
	$(CXX) -o compile/object_arrow.o -c src/objects/arrow.cpp $(CFLAGS)

compile/object_treasurechest.o: src/objects/treasurechest.cpp Makefile include/objects.h include/animation.h \
	include/player.h include/audiopool.h include/widgets.h include/decker.h
	- @mkdir -p compile
	$(CXX) -o compile/object_treasurechest.o -c src/objects/treasurechest.cpp $(CFLAGS)

compile/object_warpgate.o: src/objects/warpgate.cpp Makefile include/objects.h include/animation.h \
	include/player.h include/audiopool.h include/widgets.h include/decker.h
	- @mkdir -p compile
	$(CXX) -o compile/object_warpgate.o -c src/objects/warpgate.cpp $(CFLAGS)

compile/object_playerstartpoint.o: src/objects/playerstartpoint.cpp Makefile include/objects.h
	- @mkdir -p compile
	$(CXX) -o compile/object_playerstartpoint.o -c src/objects/playerstartpoint.cpp $(CFLAGS)

compile/object_mummy.o: src/objects/mummy.cpp Makefile include/objects.h
	- @mkdir -p compile
	$(CXX) -o compile/object_mummy.o -c src/objects/mummy.cpp $(CFLAGS)

compile/object_bat.o: src/objects/bat.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_bat.o -c src/objects/bat.cpp $(CFLAGS)

compile/object_bird.o: src/objects/bird.cpp Makefile include/objects.h include/player.h include/audiopool.h
	- @mkdir -p compile
	$(CXX) -o compile/object_bird.o -c src/objects/bird.cpp $(CFLAGS)

compile/object_scorpion.o: src/objects/scorpion.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_scorpion.o -c src/objects/scorpion.cpp $(CFLAGS)

compile/object_skeleton.o: src/objects/skeleton.cpp Makefile include/objects.h
	- @mkdir -p compile
	$(CXX) -o compile/object_skeleton.o -c src/objects/skeleton.cpp $(CFLAGS)

compile/object_mushroom.o: src/objects/mushroom.cpp Makefile include/objects.h
	- @mkdir -p compile
	$(CXX) -o compile/object_mushroom.o -c src/objects/mushroom.cpp $(CFLAGS)

compile/object_scarabeus.o: src/objects/scarabeus.cpp Makefile include/objects.h \
	include/player.h include/audiopool.h include/widgets.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_scarabeus.o -c src/objects/scarabeus.cpp $(CFLAGS)

compile/object_breakingground.o: src/objects/breakingground.cpp Makefile include/objects.h
	- @mkdir -p compile
	$(CXX) -o compile/object_breakingground.o -c src/objects/breakingground.cpp $(CFLAGS)

compile/object_fire.o: src/objects/fire.cpp Makefile include/objects.h include/audiopool.h \
	include/player.h
	- @mkdir -p compile
	$(CXX) -o compile/object_fire.o -c src/objects/fire.cpp $(CFLAGS)

compile/object_windemitter.o: src/objects/windemitter.cpp Makefile include/objects.h
	- @mkdir -p compile
	$(CXX) -o compile/object_windemitter.o -c src/objects/windemitter.cpp $(CFLAGS)

compile/object_rainemitter.o: src/objects/rainemitter.cpp Makefile include/objects.h include/ui.h
	- @mkdir -p compile
	$(CXX) -o compile/object_rainemitter.o -c src/objects/rainemitter.cpp $(CFLAGS)

compile/object_particleemitter.o: src/objects/particleemitter.cpp Makefile include/objects.h include/ui.h include/particle.h
	- @mkdir -p compile
	$(CXX) -o compile/object_particleemitter.o -c src/objects/particleemitter.cpp $(CFLAGS)

compile/object_vent.o: src/objects/vent.cpp Makefile include/objects.h \
	include/audiopool.h
	- @mkdir -p compile
	$(CXX) -o compile/object_vent.o -c src/objects/vent.cpp $(CFLAGS)

compile/object_speaker.o: src/objects/speaker.cpp Makefile include/objects.h \
	include/audiopool.h include/widgets.h
	- @mkdir -p compile
	$(CXX) -o compile/object_speaker.o -c src/objects/speaker.cpp $(CFLAGS)

compile/object_touchemitter.o: src/objects/touchemitter.cpp Makefile include/objects.h
	- @mkdir -p compile
	$(CXX) -o compile/object_touchemitter.o -c src/objects/touchemitter.cpp $(CFLAGS)

compile/object_switch.o: src/objects/switch.cpp Makefile include/objects.h
	- @mkdir -p compile
	$(CXX) -o compile/object_switch.o -c src/objects/switch.cpp $(CFLAGS)

compile/object_stamper.o: src/objects/stamper.cpp Makefile include/objects.h
	- @mkdir -p compile
	$(CXX) -o compile/object_stamper.o -c src/objects/stamper.cpp $(CFLAGS)

compile/object_ai_figure.o: src/objects/ai_figure.cpp Makefile include/objects.h include/physic.h \
	include/ai_figure.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_ai_figure.o -c src/objects/ai_figure.cpp $(CFLAGS)

compile/object_wallenstein.o: src/objects/wallenstein.cpp Makefile include/objects.h include/physic.h \
	include/ai_figure.h include/wallenstein.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_wallenstein.o -c src/objects/wallenstein.cpp $(CFLAGS)

compile/object_helena.o: src/objects/helena.cpp Makefile include/objects.h include/physic.h \
	include/ai_figure.h include/helena.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_helena.o -c src/objects/helena.cpp $(CFLAGS)

compile/object_yeti.o: src/objects/yeti.cpp Makefile include/objects.h include/physic.h \
	include/ai_figure.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_yeti.o -c src/objects/yeti.cpp $(CFLAGS)

compile/object_autogeorge.o: src/objects/autogeorge.cpp Makefile include/objects.h include/physic.h \
	include/ai_figure.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_autogeorge.o -c src/objects/autogeorge.cpp $(CFLAGS)

compile/object_extralife.o: src/objects/extralife.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_extralife.o -c src/objects/extralife.cpp $(CFLAGS)

compile/object_levelend.o: src/objects/levelend.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_levelend.o -c src/objects/levelend.cpp $(CFLAGS)

compile/object_ostrich.o: src/objects/ostrich.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_ostrich.o -c src/objects/ostrich.cpp $(CFLAGS)

compile/object_oxygen.o: src/objects/oxygen.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_oxygen.o -c src/objects/oxygen.cpp $(CFLAGS)

compile/object_fish.o: src/objects/fish.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_fish.o -c src/objects/fish.cpp $(CFLAGS)

compile/object_piranha.o: src/objects/piranha.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_piranha.o -c src/objects/piranha.cpp $(CFLAGS)

compile/object_breakingwall.o: src/objects/breakingwall.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_breakingwall.o -c src/objects/breakingwall.cpp $(CFLAGS)

compile/object_hammer.o: src/objects/hammer.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_hammer.o -c src/objects/hammer.cpp $(CFLAGS)

compile/object_cheese.o: src/objects/cheese.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile
	$(CXX) -o compile/object_cheese.o -c src/objects/cheese.cpp $(CFLAGS)

# Userinterface
compile/ui_statusbar.o: src/ui/statusbar.cpp Makefile include/ui.h include/version.h
	- @mkdir -p compile
	$(CXX) -o compile/ui_statusbar.o -c src/ui/statusbar.cpp $(CFLAGS)

compile/ui_menue.o: src/ui/menue.cpp Makefile include/ui.h
	- @mkdir -p compile
	$(CXX) -o compile/ui_menue.o -c src/ui/menue.cpp $(CFLAGS)

compile/ui_metrics.o: src/ui/metrics.cpp Makefile include/ui.h include/metrics.h
	- @mkdir -p compile
	$(CXX) -o compile/ui_metrics.o -c src/ui/metrics.cpp $(CFLAGS)

compile/ui_tileselection.o: src/ui/tileselection.cpp Makefile include/ui.h
	- @mkdir -p compile
	$(CXX) -o compile/ui_tileselection.o -c src/ui/tileselection.cpp $(CFLAGS)

compile/ui_spriteselection.o: src/ui/spriteselection.cpp Makefile include/ui.h
	- @mkdir -p compile
	$(CXX) -o compile/ui_spriteselection.o -c src/ui/spriteselection.cpp $(CFLAGS)

compile/ui_objectselection.o: src/ui/objectselection.cpp Makefile include/ui.h include/objects.h
	- @mkdir -p compile
	$(CXX) -o compile/ui_objectselection.o -c src/ui/objectselection.cpp $(CFLAGS)

compile/ui_tiletypeselection.o: src/ui/tiletypeselection.cpp Makefile include/ui.h
	- @mkdir -p compile
	$(CXX) -o compile/ui_tiletypeselection.o -c src/ui/tiletypeselection.cpp $(CFLAGS)

compile/ui_tilesframe.o: src/ui/tilesframe.cpp Makefile include/ui.h
	- @mkdir -p compile
	$(CXX) -o compile/ui_tilesframe.o -c src/ui/tilesframe.cpp $(CFLAGS)

compile/ui_worldwidget.o: src/ui/worldwidget.cpp Makefile include/ui.h
	- @mkdir -p compile
	$(CXX) -o compile/ui_worldwidget.o -c src/ui/worldwidget.cpp $(CFLAGS)

compile/ui_waynetedit.o: src/ui/waynetedit.cpp Makefile include/ui.h
	- @mkdir -p compile
	$(CXX) -o compile/ui_waynetedit.o -c src/ui/waynetedit.cpp $(CFLAGS)

compile/ui_leveldialog.o: src/ui/leveldialog.cpp Makefile include/ui.h
	- @mkdir -p compile
	$(CXX) -o compile/ui_leveldialog.o -c src/ui/leveldialog.cpp $(CFLAGS)


# Widgets
compile/widgets_groupbox.o: src/widgets/groupbox.cpp Makefile include/widgets.h
	- @mkdir -p compile
	$(CXX) -o compile/widgets_groupbox.o -c src/widgets/groupbox.cpp $(CFLAGS)

compile/widgets_dialog.o: src/widgets/dialog.cpp Makefile include/widgets.h
	- @mkdir -p compile
	$(CXX) -o compile/widgets_dialog.o -c src/widgets/dialog.cpp $(CFLAGS)

compile/widgets_filedialog.o: src/widgets/filedialog.cpp Makefile include/widgets.h
	- @mkdir -p compile
	$(CXX) -o compile/widgets_filedialog.o -c src/widgets/filedialog.cpp $(CFLAGS)

compile/widgets_colorwidget.o: src/widgets/colorwidget.cpp Makefile include/widgets.h
	- @mkdir -p compile
	$(CXX) -o compile/widgets_colorwidget.o -c src/widgets/colorwidget.cpp $(CFLAGS)

compile/widgets_gradientwidget.o: src/widgets/gradientwidget.cpp Makefile include/widgets.h
	- @mkdir -p compile
	$(CXX) -o compile/widgets_gradientwidget.o -c src/widgets/gradientwidget.cpp $(CFLAGS)

compile/widgets_tabwidget.o: src/widgets/tabwidget.cpp Makefile include/widgets.h
	- @mkdir -p compile
	$(CXX) -o compile/widgets_tabwidget.o -c src/widgets/tabwidget.cpp $(CFLAGS)

# Screens
compile/intro_screen.o: src/ui/intro_screen.cpp Makefile include/decker_sdl.h include/screens.h include/videoplayer.h
	- @mkdir -p compile
	$(CXX) -o compile/intro_screen.o -c src/ui/intro_screen.cpp $(CFLAGS)

compile/start_screen.o: src/ui/start_screen.cpp Makefile include/screens.h include/version.h
	- @mkdir -p compile
	$(CXX) -o compile/start_screen.o -c src/ui/start_screen.cpp $(CFLAGS)

compile/settings_screen.o: src/ui/settings_screen.cpp Makefile include/screens.h
	- @mkdir -p compile
	$(CXX) -o compile/settings_screen.o -c src/ui/settings_screen.cpp $(CFLAGS)

compile/level_screen.o: src/ui/level_screen.cpp Makefile include/screens.h
	- @mkdir -p compile
	$(CXX) -o compile/level_screen.o -c src/ui/level_screen.cpp $(CFLAGS)

compile/ingame_menue_screen.o: src/ui/ingame_menue_screen.cpp Makefile include/screens.h
	- @mkdir -p compile
	$(CXX) -o compile/ingame_menue_screen.o -c src/ui/ingame_menue_screen.cpp $(CFLAGS)

compile/gamestats_screen.o: src/ui/gamestats_screen.cpp Makefile include/screens.h include/decker.h include/player.h
	- @mkdir -p compile
	$(CXX) -o compile/gamestats_screen.o -c src/ui/gamestats_screen.cpp $(CFLAGS)


# Video
compile/video_videoplayer.o: src/video/videoplayer.cpp Makefile include/videoplayer.h include/decker_sdl.h
	- @mkdir -p compile
	$(CXX) -o compile/video_videoplayer.o -c src/video/videoplayer.cpp $(CFLAGS)

# Audio
compile/audio_audiosystem.o: src/audio/audiosystem.cpp Makefile include/audio.h
	- @mkdir -p compile
	$(CXX) -o compile/audio_audiosystem.o -c src/audio/audiosystem.cpp $(CFLAGS)

compile/audio_audiostream.o: src/audio/audiostream.cpp Makefile include/audio.h
	- @mkdir -p compile
	$(CXX) -o compile/audio_audiostream.o -c src/audio/audiostream.cpp $(CFLAGS)

compile/audio_audiosample.o: src/audio/audiosample.cpp Makefile include/audio.h
	- @mkdir -p compile
	$(CXX) -o compile/audio_audiosample.o -c src/audio/audiosample.cpp $(CFLAGS)

compile/audio_audioinstance.o: src/audio/audioinstance.cpp Makefile include/audio.h
	- @mkdir -p compile
	$(CXX) -o compile/audio_audioinstance.o -c src/audio/audioinstance.cpp $(CFLAGS)

compile/audio_audiopool.o: src/audio/audiopool.cpp Makefile include/audio.h include/audiopool.h include/exceptions.h
	- @mkdir -p compile
	$(CXX) -o compile/audio_audiopool.o -c src/audio/audiopool.cpp $(CFLAGS)



# texmaker
compile/texm_main.o: tools/texmaker/main.cpp Makefile tools/texmaker/texmaker.h
	- @mkdir -p compile
	$(CXX) -o compile/texm_main.o -c tools/texmaker/main.cpp $(TEXMAKER_CFLAGS)

compile/texm_texture.o: tools/texmaker/texture.cpp Makefile tools/texmaker/texmaker.h
	- @mkdir -p compile
	$(CXX) -o compile/texm_texture.o -c tools/texmaker/texture.cpp $(TEXMAKER_CFLAGS)

compile/texm_texturefile.o: tools/texmaker/texturefile.cpp Makefile tools/texmaker/texmaker.h
	- @mkdir -p compile
	$(CXX) -o compile/texm_texturefile.o -c tools/texmaker/texturefile.cpp $(TEXMAKER_CFLAGS)

compile/texm_cache.o: tools/texmaker/cache.cpp Makefile tools/texmaker/texmaker.h
	- @mkdir -p compile
	$(CXX) -o compile/texm_cache.o -c tools/texmaker/cache.cpp $(TEXMAKER_CFLAGS)

# fixbricks
compile/fixbricks_main.o: tools/fixbricks/main.cpp Makefile
	- @mkdir -p compile
	$(CXX) -o compile/fixbricks_main.o -c tools/fixbricks/main.cpp $(TEXMAKER_CFLAGS)


# mergeintro
compile/mergeintro_main.o: tools/mergeintro/main.cpp Makefile
	- @mkdir -p compile
	$(CXX) -o compile/mergeintro_main.o -c tools/mergeintro/main.cpp $(TEXMAKER_CFLAGS)
