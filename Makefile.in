CXX			= @CXX@
EXTRA_CFLAGS = -ggdb -Wall
INCLUDE	= -Iinclude -Ipplib/include -I/mingw64/include/SDL2
CPPFLAGS	= @CPPFLAGS@
CXXFLAGS	= @CXXFLAGS@
CFLAGS		=  $(INCLUDE) $(EXTRA_CFLAGS) @CXXFLAGS@ @CFLAGS@ @DEFS@  @PTHREAD_CFLAGS@ 	@ZLIB_CFLAGS@ @BZ2_CFLAGS@ @PCRE_CFLAGS@ @ICONV_CFLAGS@ \
	@MPG123_CFLAGS@	@SDL2_CFLAGS@
LDFLAGS		= @LDFLAGS@
LIBS_PPL7 = pplib/release/libppl7-tk.a  pplib/release/libppl7-audio.a  pplib/release/libppl7-gfx.a  pplib/release/libppl7-core.a

LIBS		= $(LIBS_PPL7)  \
	@LIBS@ @PTHREAD_CFLAGS@ @PTHREAD_LIBS@ @ZLIB_LIBS@ @BZ2_LIBS@ @PCRE_LIBS@ \
	@PNG_LIBS@ @ICONV_LIBS@ @MPG123_LIBS@ @SDL2_LIBS@ -lstdc++

TEXMAKER_LIBS		= pplib/release/libppl7-gfx.a  pplib/release/libppl7-core.a  \
	@LIBS@ @PTHREAD_CFLAGS@ @PTHREAD_LIBS@ @ZLIB_LIBS@ @BZ2_LIBS@ @PCRE_LIBS@ \
	@PNG_LIBS@ @ICONV_LIBS@ -lstdc++


PROGRAM	= decker

OBJECTS=compile/main.o \
	compile/sdl.o \
	compile/game.o \
	compile/spritetexture.o \
	compile/level.o \
	compile/fps.o \
	compile/ui_statusbar.o \
	compile/ui_menue.o \
	compile/ui_tileselection.o \
	compile/ui_spriteselection.o \
	compile/ui_tiletypeselection.o \
	compile/ui_tilesframe.o \
	compile/ui_worldwidget.o \
	compile/ui_objectselection.o \
	compile/widgets_scrollbar.o \
	compile/widgets_checkbox.o \
	compile/widgets_radiobutton.o \
	compile/widgets_groupbox.o \
	compile/widgets_combobox.o \
	compile/widgets_listwidget.o \
	compile/plane.o \
	compile/tiletype.o \
	compile/tile.o \
	compile/spritesystem.o \
	compile/brickoccupation.o \
	compile/player.o \
	compile/animation.o \
	compile/resources.o \
	compile/objectsystem.o \
	compile/object.o \
	compile/object_collectable.o \
	compile/object_gem.o \
	compile/object_coin.o \
	compile/object_trap.o \
	compile/object_threespeers.o \
	compile/object_laserbarrier.o \
	compile/object_enemy.o \
	compile/object_rat.o \
	compile/object_hangingspider.o \
	compile/object_savepoint.o \
	compile/object_medikit.o \
	compile/object_key.o \
	compile/object_arrow.o \
	compile/object_door.o \
	compile/object_floater.o \
	compile/object_playerstartpoint.o \
	compile/object_breakingground.o \
	compile/object_skeleton.o \
	compile/object_mummy.o \
	compile/object_fire.o \
	compile/audio_audiosystem.o \
	compile/audio_audiostream.o \
	compile/audio_audiosample.o \
	compile/audio_audioinstance.o \
	compile/audio_audiopool.o
	
	
	
	
TEXMAKER_OBJECTS	= compile/texm_main.o compile/texm_texture.o compile/texm_texturefile.o

$(PROGRAM): ppl7 $(OBJECTS)
	$(CXX) -o $(PROGRAM) $(OBJECTS) $(LIBS)
	-chmod 755 $(PROGRAM)

all: $(PROGRAM) texmaker


ppl7:
	-mkdir -p pplib/release
	cd pplib && $(MAKE) release/libppl7-core.a
	cd pplib && $(MAKE) release/libppl7-gfx.a
	cd pplib && $(MAKE) release/libppl7-tk.a
	cd pplib && $(MAKE) release/libppl7-audio.a
	
texmaker: $(TEXMAKER_OBJECTS) ppl7
	$(CXX) -o texmaker $(TEXMAKER_OBJECTS) $(TEXMAKER_LIBS)
	-chmod 755 texmaker

clean:
	-rm -f compile/*.o $(PROGRAM) texmaker *.core
	
cleanall:
	-rm -f compile/*.o $(PROGRAM) texmaker *.core
	cd pplib && $(MAKE) clean
	
sprites:
	./texmaker -s "lightwave/Render/george/*.png" -t res/george.tex -w 1024 -h 1024 -px 128 -py 195 -x res/george
	./texmaker -s "res/tiletypes/*.png" -t res/tiletypes.tex -w 256 -h 256 -px 0 -py 0 -x res/tiletypes
	./texmaker -f res/cursor/cursor.lst -t res/cursor.tex -w 128 -h 128 -px 0 -py 0
	./texmaker -s "lightwave/Render/sprites_nature/*.png" -t res/sprites_nature.tex -w 2048 -h 2048 --pivot_detection lower_middle
	./texmaker -s "lightwave/Render/sprites_nature_ui/*.png" -t res/sprites_nature_ui.tex -w 512 -h 512 -px 0 -py 0
	./texmaker -s "lightwave/Render/sprites_plants/*.png" -t res/sprites_plants.tex -w 2048 -h 2048 --pivot_detection lower_middle
	./texmaker -s "lightwave/Render/sprites_plants_ui/*.png" -t res/sprites_plants_ui.tex -w 512 -h 512 -px 0 -py 0
	./texmaker -s "lightwave/Render/sprites_objects/*.png" -t res/sprites_objects.tex -w 2048 -h 2048 --pivot_detection lower_middle
	./texmaker -s "lightwave/Render/sprites_objects_ui/*.png" -t res/sprites_objects_ui.tex -w 512 -h 512 -px 0 -py 0
	./texmaker -s "lightwave/Render/sprites_nature_blury/*.png" -t res/sprites_nature_blury.tex -w 2048 -h 2048 --pivot_detection lower_middle
	./texmaker -s "lightwave/Render/sprites_nature_blury_ui/*.png" -t res/sprites_nature_blury_ui.tex -w 512 -h 512 -px 0 -py 0
	./texmaker -s "lightwave/Render/sprites_rocks/*.png" -t res/sprites_rocks.tex -w 2048 -h 2048 --pivot_detection lower_middle
	./texmaker -s "lightwave/Render/sprites_rocks_ui/*.png" -t res/sprites_rocks_ui.tex -w 512 -h 512 -px 0 -py 0

	./texmaker -s "res/solidcolor/*.png" -t res/bricks_solid.tex -w 512 -h 512 -px 0 -py 76
	./texmaker -s "res/solidcolor/*.png" -t res/bricks_solid_ui.tex -w 512 -h 512 -px 0 -py 0
	

	./texmaker -s "lightwave/Render/bricks_white_ui/*.png" -t res/bricks_white_ui.tex -w 1024 -h 1024 -px 0 -py 0
	./texmaker -s "lightwave/Render/bricks_white/*.png" -t res/bricks_white.tex -w 1024 -h 1024 -px 0 -py 160
	./texmaker -s "lightwave/Render/objects/ui/*.png" -t res/objects_ui.tex -w 1024 -h 1024 -px 0 -py 0
	./texmaker -s "lightwave/Render/objects/interactive/*.png" -t res/objects.tex -w 1024 -h 1024 -px 128 -py 250
	
	./texmaker -s "lightwave/Render/enemies/3speers/*.png" -t res/enemy_3speers.tex -w 1024 -h 1024 -px 256 -py 255 --pivot_detection lower_middle
	./texmaker -s "lightwave/Render/mummy/*.png" -t res/mummy.tex -w 1024 -h 1024 -px 128 -py 195
	./texmaker -s "lightwave/Render/skeleton/*.png" -t res/skeleton.tex -w 1024 -h 1024 -px 128 -py 195
	./texmaker -s "lightwave/Render/objects/vent/*.png" -t res/vent.tex -w 1024 -h 1024 --pivot_detection lower_middle
	
fonts:
	- rm -rf res/*.fnt6
	pplfontmaker -t res/notosans-black.fnt6 -q /usr/share/fonts/google-noto/NotoSans-Black.ttf -s "12,20,30,50" --idn --aa4 -n "NotoSans-Black" --zlib -6
	pplfontmaker -t res/notosans.fnt6 -q /usr/share/fonts/google-noto/NotoSans-Regular.ttf -s "8,10,12,14,16,18,20" --idn --aa4 -n "NotoSans" --zlib -6
	pplfontmaker -t res/notosans.fnt6 -q /usr/share/fonts/google-noto/NotoSans-Bold.ttf -s "8,10,12,14,16,18,20" --idn --aa4 -n "NotoSans" --zlib -6 --isbold
	
	
	
compile/main.o: src/main.cpp Makefile include/decker.h
	- @mkdir -p compile 
	$(CXX) -o compile/main.o -c src/main.cpp $(CFLAGS)
	
compile/sdl.o: src/sdl.cpp Makefile include/decker.h
	- @mkdir -p compile 
	$(CXX) -o compile/sdl.o -c src/sdl.cpp $(CFLAGS)

compile/game.o: src/game.cpp Makefile include/decker.h include/ui.h include/objects.h include/audio.h
	- @mkdir -p compile 
	$(CXX) -o compile/game.o -c src/game.cpp $(CFLAGS)

compile/spritetexture.o: src/spritetexture.cpp Makefile include/decker.h
	- @mkdir -p compile 
	$(CXX) -o compile/spritetexture.o -c src/spritetexture.cpp $(CFLAGS)

compile/resources.o: src/resources.cpp Makefile include/decker.h
	- @mkdir -p compile 
	$(CXX) -o compile/resources.o -c src/resources.cpp $(CFLAGS)
	
compile/level.o: src/level.cpp Makefile include/decker.h include/objects.h
	- @mkdir -p compile 
	$(CXX) -o compile/level.o -c src/level.cpp $(CFLAGS)

compile/fps.o: src/fps.cpp Makefile include/decker.h
	- @mkdir -p compile 
	$(CXX) -o compile/fps.o -c src/fps.cpp $(CFLAGS)

compile/plane.o: src/plane.cpp Makefile include/decker.h
	- @mkdir -p compile 
	$(CXX) -o compile/plane.o -c src/plane.cpp $(CFLAGS)

compile/tiletype.o: src/tiletype.cpp Makefile include/decker.h
	- @mkdir -p compile 
	$(CXX) -o compile/tiletype.o -c src/tiletype.cpp $(CFLAGS)

compile/spritesystem.o: src/spritesystem.cpp Makefile include/decker.h
	- @mkdir -p compile 
	$(CXX) -o compile/spritesystem.o -c src/spritesystem.cpp $(CFLAGS)

compile/objectsystem.o: src/objectsystem.cpp Makefile include/objects.h include/decker.h
	- @mkdir -p compile 
	$(CXX) -o compile/objectsystem.o -c src/objectsystem.cpp $(CFLAGS)
	
compile/object.o: src/objects/object.cpp Makefile include/objects.h
	- @mkdir -p compile 
	$(CXX) -o compile/object.o -c src/objects/object.cpp $(CFLAGS)	

compile/object_collectable.o: src/objects/collectable.cpp Makefile include/objects.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_collectable.o -c src/objects/collectable.cpp $(CFLAGS)	

compile/object_gem.o: src/objects/gem.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_gem.o -c src/objects/gem.cpp $(CFLAGS)	

compile/object_coin.o: src/objects/coin.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_coin.o -c src/objects/coin.cpp $(CFLAGS)	

compile/object_trap.o: src/objects/trap.cpp Makefile include/objects.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_trap.o -c src/objects/trap.cpp $(CFLAGS)	

compile/object_threespeers.o: src/objects/threespeers.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_threespeers.o -c src/objects/threespeers.cpp $(CFLAGS)	

compile/object_laserbarrier.o: src/objects/laserbarrier.cpp Makefile include/objects.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_laserbarrier.o -c src/objects/laserbarrier.cpp $(CFLAGS)	

compile/object_enemy.o: src/objects/enemy.cpp Makefile include/objects.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_enemy.o -c src/objects/enemy.cpp $(CFLAGS)	

compile/object_rat.o: src/objects/rat.cpp Makefile include/objects.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_rat.o -c src/objects/rat.cpp $(CFLAGS)	

compile/object_hangingspider.o: src/objects/hangingspider.cpp Makefile include/objects.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_hangingspider.o -c src/objects/hangingspider.cpp $(CFLAGS)	

compile/object_key.o: src/objects/key.cpp Makefile include/objects.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_key.o -c src/objects/key.cpp $(CFLAGS)	

compile/object_door.o: src/objects/door.cpp Makefile include/objects.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_door.o -c src/objects/door.cpp $(CFLAGS)	

compile/object_floater.o: src/objects/floater.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_floater.o -c src/objects/floater.cpp $(CFLAGS)	

compile/object_medikit.o: src/objects/medikit.cpp Makefile include/objects.h 
	- @mkdir -p compile 
	$(CXX) -o compile/object_medikit.o -c src/objects/medikit.cpp $(CFLAGS)	

compile/object_savepoint.o: src/objects/savepoint.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_savepoint.o -c src/objects/savepoint.cpp $(CFLAGS)	

compile/object_arrow.o: src/objects/arrow.cpp Makefile include/objects.h include/animation.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_arrow.o -c src/objects/arrow.cpp $(CFLAGS)	

compile/object_playerstartpoint.o: src/objects/playerstartpoint.cpp Makefile include/objects.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_playerstartpoint.o -c src/objects/playerstartpoint.cpp $(CFLAGS)	

compile/object_mummy.o: src/objects/mummy.cpp Makefile include/objects.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_mummy.o -c src/objects/mummy.cpp $(CFLAGS)	

compile/object_skeleton.o: src/objects/skeleton.cpp Makefile include/objects.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_skeleton.o -c src/objects/skeleton.cpp $(CFLAGS)	

compile/object_breakingground.o: src/objects/breakingground.cpp Makefile include/objects.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_breakingground.o -c src/objects/breakingground.cpp $(CFLAGS)	

compile/object_fire.o: src/objects/fire.cpp Makefile include/objects.h
	- @mkdir -p compile 
	$(CXX) -o compile/object_fire.o -c src/objects/fire.cpp $(CFLAGS)	


compile/tile.o: src/tile.cpp Makefile include/decker.h
	- @mkdir -p compile 
	$(CXX) -o compile/tile.o -c src/tile.cpp $(CFLAGS)

compile/player.o: src/player.cpp Makefile include/player.h include/animation.h include/decker.h include/objects.h
	- @mkdir -p compile 
	$(CXX) -o compile/player.o -c src/player.cpp $(CFLAGS)

compile/animation.o: src/animation.cpp Makefile include/animation.h
	- @mkdir -p compile 
	$(CXX) -o compile/animation.o -c src/animation.cpp $(CFLAGS)

compile/brickoccupation.o: src/brickoccupation.cpp Makefile include/decker.h
	- @mkdir -p compile 
	$(CXX) -o compile/brickoccupation.o -c src/brickoccupation.cpp $(CFLAGS)


compile/ui_statusbar.o: src/ui/statusbar.cpp Makefile include/ui.h
	- @mkdir -p compile 
	$(CXX) -o compile/ui_statusbar.o -c src/ui/statusbar.cpp $(CFLAGS)

compile/ui_menue.o: src/ui/menue.cpp Makefile include/ui.h
	- @mkdir -p compile 
	$(CXX) -o compile/ui_menue.o -c src/ui/menue.cpp $(CFLAGS)

compile/ui_tileselection.o: src/ui/tileselection.cpp Makefile include/ui.h
	- @mkdir -p compile 
	$(CXX) -o compile/ui_tileselection.o -c src/ui/tileselection.cpp $(CFLAGS)

compile/ui_spriteselection.o: src/ui/spriteselection.cpp Makefile include/ui.h
	- @mkdir -p compile 
	$(CXX) -o compile/ui_spriteselection.o -c src/ui/spriteselection.cpp $(CFLAGS)

compile/ui_objectselection.o: src/ui/objectselection.cpp Makefile include/ui.h include/objects.h
	- @mkdir -p compile 
	$(CXX) -o compile/ui_objectselection.o -c src/ui/objectselection.cpp $(CFLAGS)

compile/ui_tiletypeselection.o: src/ui/tiletypeselection.cpp Makefile include/ui.h
	- @mkdir -p compile 
	$(CXX) -o compile/ui_tiletypeselection.o -c src/ui/tiletypeselection.cpp $(CFLAGS)

compile/ui_tilesframe.o: src/ui/tilesframe.cpp Makefile include/ui.h
	- @mkdir -p compile 
	$(CXX) -o compile/ui_tilesframe.o -c src/ui/tilesframe.cpp $(CFLAGS)

compile/ui_worldwidget.o: src/ui/worldwidget.cpp Makefile include/ui.h
	- @mkdir -p compile 
	$(CXX) -o compile/ui_worldwidget.o -c src/ui/worldwidget.cpp $(CFLAGS)


compile/widgets_scrollbar.o: src/widgets/scrollbar.cpp Makefile include/widgets.h
	- @mkdir -p compile 
	$(CXX) -o compile/widgets_scrollbar.o -c src/widgets/scrollbar.cpp $(CFLAGS)

compile/widgets_checkbox.o: src/widgets/checkbox.cpp Makefile include/widgets.h
	- @mkdir -p compile 
	$(CXX) -o compile/widgets_checkbox.o -c src/widgets/checkbox.cpp $(CFLAGS)

compile/widgets_radiobutton.o: src/widgets/radiobutton.cpp Makefile include/widgets.h
	- @mkdir -p compile 
	$(CXX) -o compile/widgets_radiobutton.o -c src/widgets/radiobutton.cpp $(CFLAGS)

compile/widgets_groupbox.o: src/widgets/groupbox.cpp Makefile include/widgets.h
	- @mkdir -p compile 
	$(CXX) -o compile/widgets_groupbox.o -c src/widgets/groupbox.cpp $(CFLAGS)

compile/widgets_combobox.o: src/widgets/combobox.cpp Makefile include/widgets.h
	- @mkdir -p compile 
	$(CXX) -o compile/widgets_combobox.o -c src/widgets/combobox.cpp $(CFLAGS)

compile/widgets_listwidget.o: src/widgets/listwidget.cpp Makefile include/widgets.h
	- @mkdir -p compile 
	$(CXX) -o compile/widgets_listwidget.o -c src/widgets/listwidget.cpp $(CFLAGS)

# Audio
compile/audio_audiosystem.o: src/audio/audiosystem.cpp Makefile include/audio.h
	- @mkdir -p compile 
	$(CXX) -o compile/audio_audiosystem.o -c src/audio/audiosystem.cpp $(CFLAGS)
	
compile/audio_audiostream.o: src/audio/audiostream.cpp Makefile include/audio.h
	- @mkdir -p compile 
	$(CXX) -o compile/audio_audiostream.o -c src/audio/audiostream.cpp $(CFLAGS)
	
compile/audio_audiosample.o: src/audio/audiosample.cpp Makefile include/audio.h
	- @mkdir -p compile 
	$(CXX) -o compile/audio_audiosample.o -c src/audio/audiosample.cpp $(CFLAGS)
	
compile/audio_audioinstance.o: src/audio/audioinstance.cpp Makefile include/audio.h
	- @mkdir -p compile 
	$(CXX) -o compile/audio_audioinstance.o -c src/audio/audioinstance.cpp $(CFLAGS)

compile/audio_audiopool.o: src/audio/audiopool.cpp Makefile include/audio.h include/audiopool.h include/exceptions.h
	- @mkdir -p compile 
	$(CXX) -o compile/audio_audiopool.o -c src/audio/audiopool.cpp $(CFLAGS)



# texmaker
compile/texm_main.o: tools/texmaker/main.cpp Makefile tools/texmaker/texmaker.h
	- @mkdir -p compile 
	$(CXX) -o compile/texm_main.o -c tools/texmaker/main.cpp $(CFLAGS)
	
compile/texm_texture.o: tools/texmaker/texture.cpp Makefile tools/texmaker/texmaker.h
	- @mkdir -p compile 
	$(CXX) -o compile/texm_texture.o -c tools/texmaker/texture.cpp $(CFLAGS)
	
compile/texm_texturefile.o: tools/texmaker/texturefile.cpp Makefile tools/texmaker/texmaker.h
	- @mkdir -p compile 
	$(CXX) -o compile/texm_texturefile.o -c tools/texmaker/texturefile.cpp $(CFLAGS)
	